import{k as o,l as n}from"./index-c1909b7c.js";const i=()=>n.get("/sanctum/csrf-cookie"),p=o({id:"expense",state:()=>({expenses:[],create:[],loading:!1,error:null,singleExpense:{}}),getters:{allExpense:e=>e.expenses,isLoading:e=>e.loading,getError:e=>e.error},actions:{async expenseAll(){this.loading=!0;try{const e=await n.get("/api/expense").then(s=>{this.expenses=s.data})}catch(e){this.error=e}finally{this.loading=!1}},async getDataCreate(){this.loading=!0;try{const e=await n.get("/api/expense/create").then(s=>{this.create=s.data})}catch(e){this.error=e}finally{this.loading=!1}},async expenseById(e){this.loading=!0;try{const s=await n.get(`/api/expense/expense-id/${e}`);s.status===200?this.singleExpense=s.data:this.singleExpense={}}catch(s){s.response&&s.response.status===404?this.singleExpense={}:this.error=s}finally{this.loading=!1}},async downloadExpense(e){this.loading=!0;try{window.location.href=`https://api.ezzora.sites.id//api/expense/download/${e}`}catch(s){console.log(s)}finally{this.loading=!1}},async addExpense(e,s,a){await i(),a.value=!0,n.post("/api/expense",e).then(t=>{a.value=!1,this.expenses.push(t.data),this.router.push({name:"admin.cashflow.index"})}).catch(t=>{if(console.log(t),t.response.status!==422)throw t;s.value=Object.values(t.response.data.errors).flat(),a.value=!1})},async editExpense(e,s,a,t){await i(),a.value=!0,n.post(`/api/expense/${t}`,e).then(l=>{a.value=!1,this.router.push({name:"admin.cashflow.index"}),console.log(l)}).catch(l=>{if(console.log(l),l.response.status!==422)throw l;s.value=Object.values(l.response.data.errors).flat(),a.value=!1})},async deleteExpense(e,s){await i(),s.value=!0;try{const a=await n.delete(`/api/expense/${e}`);this.expenses=this.expenses.filter(t=>t.id!==e),s.value=!1}catch(a){this.error=a,console.log(this.error),s.value=!1}finally{s.value=!1}}}});export{p as u};
