import{a1 as U,r as i,x as V,C as D,c as l,d as g,e as C,w as o,h as e,f as d,E as N,O as F,G as M,t as n,n as B,s as $,m as P,F as j,p as G,q as z}from"./index-c1909b7c.js";import{_ as J}from"./StoreLayout-4c53fbcb.js";const H={class:"w-full"},K={class:"relative"},q={class:"bg-light-primary-1 dark:bg-dark-primary-2 p-5 rounded-lg space-y-3 shadow-lg"},X={class:"flex justify-between items-center"},Y=e("option",{value:"ALL"},"All",-1),Z=e("option",{value:"BEING_PACKED"},"Being Packed",-1),Q=e("option",{value:"CONFIRMED"},"Confirmed",-1),W=e("option",{value:"ALLOCATED"},"Allocated",-1),ee=e("option",{value:"PICKING_UP"},"Picking Up",-1),te=e("option",{value:"PICKED"},"Picked",-1),ae=e("option",{value:"DROPPING_OFF"},"Dropping Off",-1),se=e("option",{value:"RETURN_IN_TRANSIT"}," Return In Transit ",-1),oe=e("option",{value:"ON_HOLD"},"On Hold",-1),re=e("option",{value:"DELIVERED"},"Delivered",-1),ne=e("option",{value:"REJECTED"},"Rejected",-1),ie=e("option",{value:"COURIER_NOT_FOUND"}," Courier Not Found ",-1),le=e("option",{value:"RETURNED"},"Returned",-1),de=e("option",{value:"CANCELLED"},"Cancelled",-1),ce=e("option",{value:"DISPOSED"},"Disposed",-1),ue=[Y,Z,Q,W,ee,te,ae,se,oe,re,ne,ie,le,de,ce],pe={class:"capitalize"},_e={class:"flex justify-center"},me={class:"flex justify-center"},ge={class:"py-1"},he={class:"bg-light-primary-1 border p-3 rounded-lg max-w-xl shadow-lg"},ve={key:0},ye={class:"bg-white"},fe={class:"flex gap-5 mt-[5px]"},be={class:"text-xs min-w-20 flex-none"},xe={class:"text-xs font-medium capitalize"},De={class:"text-gray-500 text-xs"},ke={class:""},Ee={class:""},we={class:""},Ce={data:()=>({fav:!0,menu:!1,message:!1,hints:!0})},Le=Object.assign(Ce,{__name:"Index",setup(Ne){const k=U(),E=i([]);V(async()=>{await k.paymentAll(),await I()});async function I(){E.value=k.payments.filter(a=>a.is_reseller==!1)}const c=i("ALL");i(!1);const R=i([]),L=D(()=>R.value),u=i(""),p=i(1),S=i(10),O=[{key:"invoice_code",title:"Invoice"},{key:"user.name",title:"Name"},{key:"created_at",title:"Billing Date"},{key:"paid_at",title:"Paid At"},{key:"status_payment",title:"Status Payment",align:"center"},{key:"status_proccess",title:"Status Proccess",align:"center"},{key:"amount",title:"Amount"}],T=D(()=>Math.ceil(w.value.length/S.value)),w=D(()=>E.value.filter(a=>{const s=a.invoice_code.toLowerCase().includes(u.value.toLowerCase()),r=c.value==="ALL"||a.status_proccess===c.value;return s&&r}));function h(a){if(a){if(!a||typeof a!="string")return"Invalid Date";const s=a.includes("T")?a:a.replace(" ","T")+"Z",r=new Date(s);if(isNaN(r.getTime()))return"Invalid Date";const v=["January","February","March","April","May","June","July","August","September","October","November","December"],y=r.getUTCFullYear(),f=String(v[r.getUTCMonth()]),b=String(r.getUTCDate()).padStart(2,"0"),x=String(r.getUTCHours()).padStart(2,"0"),t=String(r.getUTCMinutes()).padStart(2,"0");return`${f} ${b}, ${y}, ${x}:${t}`}}function A(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return(a,s)=>{const r=l("ValidationErrors"),v=l("v-timeline-item"),y=l("v-timeline"),f=l("v-menu"),b=l("v-data-table"),x=l("v-pagination");return g(),C(J,{title:"List Payment"},{default:o(()=>[e("div",H,[e("div",K,[d(r,{class:"w-full",errors:L.value},null,8,["errors"]),e("div",q,[e("div",X,[N(e("select",{class:"rounded-lg text-sm min-w-52 dark:!border-gray-500 border !border-typography-2/20 shadow-lg bg-light-primary-1 dark:bg-dark-primary-1 text-typography-3 dark:text-white","onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t)},ue,512),[[F,c.value]]),N(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),class:"rounded-lg text-sm min-w-52 dark:!border-gray-500 border !border-typography-2/20 shadow-lg bg-light-primary-1 dark:bg-dark-primary-1 text-typography-3 dark:text-white",placeholder:"Search Payment"},null,512),[[M,u.value]])]),d(b,{page:p.value,"onUpdate:page":s[2]||(s[2]=t=>p.value=t),search:u.value,headers:O,items:w.value,"hide-default-footer":"","header-props":{class:"dark:bg-dark-primary-1 bg-light-primary-2 dark:!text-white border-b dark:!border-white/30"},"item-key":"id",class:"border dark:!border-typography-2/20 shadow-lg dark:!bg-dark-primary-1 !bg-light-primary-2 dark:!text-typography-1"},{"item.user.name":o(({item:t})=>[e("p",pe,n(t.user.name),1)]),"item.status_payment":o(({item:t})=>[e("div",_e,[e("div",{class:B(["rounded-full text-center text-xs py-1 px-3 items-center inline-flex text-typography-1 font-medium",t.status_payment=="SUCCESS"?"bg-gradient-to-r from-secondary-3 to-secondary-3/60":t.status_payment=="PENDING"?"bg-gradient-to-r from-purple-600 to-indigo-800":t.status_payment=="EXPIRED"?"bg-secondary-1":""])},n(t.status_payment),3)])]),"item.status_proccess":o(({item:t})=>[d(f,{"open-on-hover":"",location:"bottom"},{activator:o(({props:_})=>[e("div",me,[e("div",$(_,{class:["rounded-full text-center text-xs py-1 px-3 items-center inline-flex text-typography-1 font-medium whitespace-nowrap",t.status_proccess=="DELIVERED"?"bg-gradient-to-r from-secondary-3 to-secondary-3/60":"bg-gradient-to-r from-blue-500 to-blue-500/60"]}),n(t.status_proccess.replace(/_/," ")),17)])]),default:o(()=>[e("div",ge,[e("div",he,[t.history.length>0?(g(),P("div",ve,[e("div",ye,[d(y,{align:"start",side:"end"},{default:o(()=>{var _;return[(g(!0),P(j,null,G((_=t==null?void 0:t.history)==null?void 0:_.slice().reverse(),(m,Pe)=>(g(),C(v,{"dot-color":"#ffffff",size:"small"},{default:o(()=>[e("div",fe,[e("p",be,n(h(m.created_at)),1),e("div",null,[e("p",xe,n(m.status=="ORDER_MADE"?"Order Created":m.status.replace("_"," ").toLowerCase()),1),e("div",De,n(m.message),1)])])]),_:2},1024))),256))]}),_:2},1024)])])):z("",!0)])])]),_:2},1024)]),"item.created_at":o(({item:t})=>[e("div",ke,n(h(t.created_at)),1)]),"item.paid_at":o(({item:t})=>[e("div",Ee,n(h(t.paid_at)),1)]),"item.amount":o(({item:t})=>[e("div",we," Rp. "+n(A(t.amount)),1)]),_:1},8,["page","search","items"]),d(x,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=t=>p.value=t),length:T.value,class:"bg-light-primary-2 border !border-typography-2/20 shadow-lg rounded-lg dark:bg-dark-primary-1 dark:text-white","total-visible":5},null,8,["modelValue","length"])])])])]),_:1})}}});export{Le as default};
