import{k as u,l as s}from"./index-c1909b7c.js";const r=()=>s.get("/sanctum/csrf-cookie"),i=u({id:"voucher",state:()=>({vouchers:[],loading:!1,error:null,singleVoucher:{}}),getters:{allVoucher:a=>a.vouchers,isLoading:a=>a.loading,getError:a=>a.error},actions:{async voucherAll(){this.loading=!0;try{const a=await s.get("/api/voucher").then(e=>{this.vouchers=e.data})}catch(a){this.error=a}finally{this.loading=!1}},async voucherById(a){this.loading=!0;try{const e=await s.get(`/api/voucher/voucher-id/${a}`);e.status===200?this.singleVoucher=e.data:this.singleVoucher={}}catch(e){e.response&&e.response.status===404?this.singleVoucher={}:this.error=e}finally{this.loading=!1}},async addVoucher(a,e,t){await r(),t.value=!0,s.post("/api/voucher",a).then(o=>{t.value=!1,this.vouchers.push(o.data),this.router.push({name:"admin.voucher.index"})}).catch(o=>{if(console.log(o),o.response.status!==422)throw o;e.value=Object.values(o.response.data.errors).flat(),t.value=!1})},async editVoucher(a,e,t,o){await r(),t.value=!0,s.post(`/api/voucher/${o}`,a).then(l=>{t.value=!1,this.router.push({name:"admin.voucher.index"}),console.log(l)}).catch(l=>{if(console.log(l),l.response.status!==422)throw l;e.value=Object.values(l.response.data.errors).flat(),t.value=!1})},async deleteVoucher(a,e){await r(),e.value=!0;try{const t=await s.delete(`/api/voucher/${a}`);this.vouchers=this.vouchers.filter(o=>o.id!==a),e.value=!1}catch(t){this.error=t,console.log(this.error),e.value=!1}finally{e.value=!1}},async downloadVoucher(a,e){e.value=!0;try{const t=`https://api.ezzora.sites.id//api/voucher/download/${a}`;window.open(t,"_blank"),e.value=!1}catch(t){this.error=t,console.log(this.error),e.value=!1}finally{e.value=!1}},async downloadAllVoucher(a,e){e.value=!0;try{const t=`https://api.ezzora.sites.id//api/voucher/download-all/${a}`;window.open(t,"_blank"),e.value=!1}catch(t){this.error=t,console.log(this.error),e.value=!1}finally{e.value=!1}}}});export{i as u};
