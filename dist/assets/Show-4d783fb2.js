import{r as c,C as U,K as oe,ah as re,I as ne,b as ie,o as ue,a as de,c as F,d as u,e as M,w as d,_ as ce,f as r,g as pe,J as ve,m as f,h as e,i as p,S as T,F as j,p as D,q as I,v as _e,t as m,y as V,E as H,ai as J,s as fe,R as me,L as E,n as K}from"./index-c1909b7c.js";import{V as ge}from"./VNumberInput-cfd2812f.js";const ye={key:0,class:"px-10 py-5"},he={class:"flex flex-row bg-white mx-auto rounded-lg shadow-lg gap-3 w-full relative"},xe={class:"flex flex-col gap-2 h-full py-6 p-4 w-full max-w-sm flex-none sticky top-20"},we={class:"w-full rounded-sm overflow-hidden aspect-square"},be={class:"w-full h-full flex justify-center items-center"},ke={class:"w-full flex justify-center items-center h-full"},qe={class:"w-full flex justify-center items-center h-full"},Se={class:"w-full flex justify-center items-center h-full"},Ce={class:"h-full py-6 p-4 gap-2 flex flex-col w-full"},je={class:"text-xl font-medium"},De={class:"flex items-center gap-2"},Ve={class:"flex gap-1 border-r border-gray-300 pr-3 py-1"},Pe=e("div",{class:"flex gap-1 border-r border-gray-300 pr-3 py-1"},[e("p",{class:"text-gray-500 text-xs"},[e("span",{class:"text-sm text-black"},"0"),V(" Terjual ")])],-1),ze={class:"flex flex-col w-full border-b !border-typography-2 !border-opacity-20 pb-2"},Ne={class:"text-2xl font-medium"},Be={key:0,class:"line-through text-sm text-typography-2"},Ie={key:0},$e={class:"text-sm font-medium"},Le={class:"text-typography-2"},Re={class:"flex flex-wrap gap-2 text-xs py-3"},Ue=e("label",{class:"border rounded-lg px-3 py-1 peer-checked:border-secondary-3 peer-checked:text-secondary-3 cursor-pointer",for:"defaultPrice"}," None ",-1),Fe=["id","value"],Me=["for"],Te={class:"py-1"},Ee={class:"bg-light-primary-1 border p-3 rounded-lg max-w-xl shadow-lg"},Oe={class:"divide-y"},Ae={class:"w-10 flex-none"},He=["src"],Je={class:"line-clamp-1 text-sm"},Ke={class:"p-5 bg-ezzora-50 rounded-lg !text-sm border"},Ge=e("legend",{class:"bg-ezzora-100 rounded-lg px-5 py-1 font-semibold border text-xs"}," Details ",-1),Qe=["innerHTML"],We={class:"w-full sticky top-20 py-6 px-4 h-full max-w-xs"},Xe={class:"border rounded-lg p-3 space-y-3"},Ye=e("p",{class:"font-semibold"},"Set quantity and notes",-1),Ze={class:"text-typography-2 text-xs text-center"},et={class:"text-base font-medium text-typography-3"},tt={class:"flex justify-between"},st=e("p",{class:"text-sm"},"Subtotal",-1),at={class:"font-semibold"},lt={class:"flex flex-col justify-between text-[13px] gap-2"},ot=["disabled"],rt=e("div",{class:"w-5 h-5"},[e("i",{class:"fa-regular fa-plus"})],-1),nt=e("p",null,"Add to Cart",-1),it=[rt,nt],ut=["disabled"],dt=e("div",{class:"w-5 h-5"},[e("i",{class:"fa-regular fa-cart-shopping"})],-1),ct=e("p",null,"Buy Now",-1),pt=[dt,ct],vt=e("button",{class:"py-2 px-4 duration-300 flex items-center gap-2 w-full justify-center bg-secondary-2 text-typography-1 rounded-lg hover:bg-opacity-80"},[e("div",{class:"w-5 h-5"},[e("i",{class:"fa-regular fa-plus"})]),e("p",null,"Pre Order")],-1),_t=[vt],yt={__name:"Show",setup(ft){const P=c([]),G=U(()=>P.value),s=c(null),w=c(!0),b=oe(),$=re(),g=ne(),a=c(null),Q=ie(),k="https://api.ezzora.sites.id/";c(!1);const W=c(),v=c({quantity:1}),y=U(()=>{if(s.value!==null&&s.value){let t=1/0;return s.value.item.forEach(l=>{const _=l.product.stock.filter(x=>x.product_stock_status=="warehouse").length;console.log(_),_<t&&(t=_)}),t=t===1/0?0:t,t}else return a.value.stock.filter(t=>t.product_stock_status=="warehouse").length});function z(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const X=U(()=>v.value.quantity*(s.value?s.value.price:a?a.value.product_price:0));ue(async()=>{g.authUser&&(g.hasUserData||g.getData()),await Y()});const h=c(),L=c();async function Y(){const t=de(),l=c(t.params.slug),_=c(t.params.id);await b.productBySlugId(l.value,_.value),!b.singleProduct||Object.keys(b.singleProduct).length===0?Q.replace("/404"):(a.value=b.singleProduct,h.value="https://api.ezzora.sites.id//storage/images/product/"+a.value.product_image,L.value=h.value,W.value=a.value.product_price,w.value=b.loading)}const Z=async()=>{const t=new FormData;t.append("quantity",v.value.quantity),t.append("user_id",g.userData.id),t.append("product_id",a.value.id),s.value&&s.value!==null&&t.append("bundling_id",s.value.id),await $.addCart(t,P,w)},ee=async()=>{const t=new FormData;t.append("quantity",v.value.quantity),t.append("user_id",g.userData.id),t.append("product_id",a.value.id),s.value&&s.value!==null&&t.append("bundling_id",s.value.id),await $.buyNow(t,P,w)},te=async()=>{const t=new FormData;t.append("quantity",v.value.quantity),t.append("user_id",g.userData.id),t.append("product_id",a.value.id),t.append("is_pre_order",!0),s.value&&s.value!==null&&t.append("bundling_id",s.value.id),await $.addCart(t,P,w)},se=t=>{};return(t,l)=>{const _=F("v-progress-circular"),x=F("v-img"),ae=F("v-menu");return u(),M(ce,null,{default:d(()=>{var O,A;return[r(pe,{isLoading:w.value},null,8,["isLoading"]),r(ve,{class:"w-full",errors:G.value},null,8,["errors"]),a.value?(u(),f("div",ye,[e("div",he,[e("div",xe,[e("div",we,[r(x,{src:h.value,class:"mx-auto","aspect-ratio":"1/1",cover:""},{placeholder:d(()=>[e("div",be,[r(_,{color:"",indeterminate:""})])]),_:1},8,["src"])]),r(p(_e),{"space-between":8,"slides-per-view":5,class:"h-20 w-full",onSwiper:se},{default:d(()=>{var o,N,i,B,q;return[r(p(T),{class:"cursor-pointer flex items-center justify-center"},{default:d(()=>[r(x,{onClick:l[0]||(l[0]=n=>{h.value=L.value,s.value=null}),src:L.value,class:"!aspect-square w-full rounded-sm",cover:""},{placeholder:d(()=>[e("div",ke,[r(_,{color:"",indeterminate:""})])]),_:1},8,["src"])]),_:1}),(u(!0),f(j,null,D((o=a.value)==null?void 0:o.gallery,(n,R)=>(u(),M(p(T),{key:R,class:"cursor-pointer flex items-center justify-center"},{default:d(()=>{var S;return[r(x,{onClick:le=>{var C;return h.value=p(k)+"/storage/images/product/gallery/"+((C=a.value)==null?void 0:C.id)+"/"+n.product_image},src:p(k)+"/storage/images/product/gallery/"+((S=a.value)==null?void 0:S.id)+"/"+n.product_image,class:"!aspect-square w-full",cover:""},{placeholder:d(()=>[e("div",qe,[r(_,{color:"",indeterminate:""})])]),_:2},1032,["onClick","src"])]}),_:2},1024))),128)),((i=(N=a.value)==null?void 0:N.bundling)==null?void 0:i.length)>0&&((B=t.bundling)!=null&&B.image)?(u(!0),f(j,{key:0},D((q=a.value)==null?void 0:q.bundling,(n,R)=>(u(),M(p(T),{key:R,class:"cursor-pointer flex items-center justify-center"},{default:d(()=>{var S;return[r(x,{onClick:le=>{var C;s.value=n,h.value=p(k)+"/storage/images/product/bundling/"+((C=a.value)==null?void 0:C.id)+"/"+(n==null?void 0:n.image)},src:p(k)+"/storage/images/product/bundling/"+((S=a.value)==null?void 0:S.id)+"/"+(n==null?void 0:n.image),class:"!aspect-square w-full",cover:""},{placeholder:d(()=>[e("div",Se,[r(_,{color:"",indeterminate:""})])]),_:2},1032,["onClick","src"])]}),_:2},1024))),128)):I("",!0)]}),_:1})]),e("div",Ce,[e("p",je,m(a.value?a.value.product_name:""),1),e("div",De,[e("div",Ve,[(u(),f(j,null,D(5,o=>e("i",{key:o,class:"fa-solid fa-star text-yellow-300 text-xs"})),64))]),Pe]),e("div",ze,[e("p",Ne," Rp. "+m(s.value?z(s.value.price):z(a.value.product_price)),1),a.value.product_promo_price&&!s.value?(u(),f("p",Be," Rp. "+m(z(a.value.product_promo_price)),1)):I("",!0)]),((A=(O=a.value)==null?void 0:O.bundling)==null?void 0:A.length)>0?(u(),f("div",Ie,[e("p",$e,[V(" Select Bundlings Item: "),e("span",Le,m(s.value?s.value.name:"None"),1)]),e("div",Re,[e("div",null,[H(e("input",{class:"hidden peer",type:"radio",id:"defaultPrice",value:null,"onUpdate:modelValue":l[1]||(l[1]=o=>s.value=o),name:"selectedVariant"},null,512),[[J,s.value]]),Ue]),(u(!0),f(j,null,D(a.value.bundling,(o,N)=>(u(),f("div",{key:N},[H(e("input",{class:"hidden peer",id:"variant-"+o.id,type:"radio",name:"selectedVariant",value:o,"onUpdate:modelValue":l[2]||(l[2]=i=>s.value=i)},null,8,Fe),[[J,s.value]]),r(ae,{"open-on-hover":"",location:"bottom"},{activator:d(({props:i})=>[e("label",fe({ref_for:!0},i,{class:"border rounded-lg px-3 py-1 peer-checked:border-secondary-3 peer-checked:text-secondary-3 cursor-pointer",for:"variant-"+o.id}),m(o.name),17,Me)]),default:d(()=>[e("div",Te,[e("div",Ee,[e("div",Oe,[(u(!0),f(j,null,D(o.item,(i,B)=>{var q,n;return u(),f("div",{key:B},[r(p(me),{to:{name:"product.detail",params:{slug:(q=i.product)==null?void 0:q.product_slug,id:(n=i==null?void 0:i.product)==null?void 0:n.id}},target:"_blank",class:"py-2 flex items-center gap-2 bg-light-primary-1 hover:bg-light-primary-2"},{default:d(()=>[e("div",Ae,[e("img",{class:"aspect-square !w-full rounded-lg object-cover",src:p(k)+"/storage/images/product/"+i.product.product_image,alt:""},null,8,He)]),e("p",Je,m(i.product.product_name),1)]),_:2},1032,["to"])])}),128))])])])]),_:2},1024)]))),128))])])):I("",!0),e("fieldset",Ke,[Ge,e("p",{innerHTML:a.value.product_description},null,8,Qe)])]),e("div",We,[e("div",Xe,[Ye,e("div",null,[r(p(ge),{density:"compact",modelValue:v.value.quantity,"onUpdate:modelValue":l[3]||(l[3]=o=>v.value.quantity=o),class:"border rounded-lg overflow-hidden","hide-details":"","single-line":!1,variant:"solo-filled",min:y.value>0?1:0,"control-variant":"split"},null,8,["modelValue","min"])]),e("div",null,[e("p",Ze,[V(" Available "),e("span",et,m(y.value),1),V(" Stock ")])]),e("div",tt,[st,e("p",at,[V(" Rp. "),e("span",null,m(z(X.value)),1)])]),e("div",lt,[e("form",{onSubmit:l[4]||(l[4]=E(o=>Z(),["prevent"])),class:"w-full"},[e("button",{class:K([v.value.quantity>y.value?"opacity-60 cursor-not-allowed":"hover:bg-opacity-80","py-2 px-4 duration-300 flex items-center gap-2 w-full justify-center bg-ezzora-100 rounded-lg"]),disabled:v.value.quantity>y.value},it,10,ot)],32),e("form",{class:"w-full",onSubmit:l[5]||(l[5]=E(o=>ee(),["prevent"]))},[e("button",{class:K([v.value.quantity>y.value?"opacity-60 cursor-not-allowed":"hover:bg-opacity-80","py-2 px-4 duration-300 flex items-center gap-2 w-full justify-center bg-secondary-3 text-typography-1 rounded-lg"]),disabled:v.value.quantity>y.value},pt,10,ut)],32),e("form",{onSubmit:l[6]||(l[6]=E(o=>te(),["prevent"])),class:"w-full"},_t,32)])])])])])):I("",!0)]}),_:1})}}};export{yt as default};
