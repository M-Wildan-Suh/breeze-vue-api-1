import{a as xt,b as yt,a1 as ht,r as T,o as ft,ab as mt,c as L,d as y,e as ct,w as c,_ as gt,f as u,g as vt,m as b,h as t,t as s,n as z,F as it,p as dt,i as bt,q as pt}from"./index-c1909b7c.js";import{C as h}from"./index-384b78b9.js";import"./_commonjs-dynamic-modules-302442b1.js";const Dt={key:0,class:"px-10 py-5 text-black max-w-6xl mx-auto"},Et={class:"bg-ezzora-100 rounded-t-lg p-5 shadow-lg"},St={class:"flex justify-end gap-3 border-b pb-3"},Ct={class:"text-sm text-typography-2"},wt=t("p",null,"|",-1),Lt={class:"text-sm font-medium"},zt=t("p",{class:"text-sm text-center"},"Order Make",-1),At={class:"text-xs text-center text-typography-2"},kt=t("i",{class:"fa-regular fa-file-invoice text-light-primary-1 text-3xl"},null,-1),Bt=t("p",{class:"text-sm text-center"},"Order Paid",-1),It={class:"text-xs text-center text-typography-2"},Pt=t("p",{class:"text-sm text-center"}," Order Being Packed ",-1),Tt={class:"text-xs text-center text-typography-2"},Rt=t("p",{class:"text-sm text-center"},"Order Shipped",-1),Ot={class:"text-xs text-center text-typography-2"},Ut=t("p",{class:"text-sm text-center"},"Delivered",-1),Nt={class:"text-xs text-center text-typography-2"},$t={class:"relative bg-light-primary-1"},Vt=t("div",{class:"absolute w-full h-1",style:{"background-image":`repeating-linear-gradient(\r
                            45deg,\r
                            #6fa6d6,\r
                            #6fa6d6 33px,\r
                            transparent 0,\r
                            transparent 41px,\r
                            #f18d9b 0,\r
                            #f18d9b 74px,\r
                            transparent 0,\r
                            transparent 82px\r
                        )`}},null,-1),qt={class:"p-5"},Ft={class:"w-full flex justify-between"},Kt=t("p",{class:"text-lg font-medium py-3"},"Shipping Address",-1),Mt={class:"flex flex-col text-xs text-end text-gray-500"},Gt={class:"flex divide-x divide-typography-2"},jt={class:"w-full max-w-sm"},Ht={class:"text-base font-medium pb-1"},Jt={class:"text-typography-2 text-sm pb-1"},Yt={class:"text-typography-2 text-sm"},Zt={class:"flex gap-5 mt-[5px]"},Qt={class:"text-xs min-w-20 flex-none"},Wt={class:"text-xs font-medium capitalize"},Xt={class:"text-gray-500 text-sm"},te={class:"bg-ezzora-50 shadow-lg rounded-b-lg"},ee={class:"p-5"},se=t("p",{class:"text-lg font-medium pb-3"},"List Product",-1),ae={class:"!divide-y divide-typography-2 divide-opacity-50 border-y border-y-typography-2 border-opacity-50"},oe={class:"py-2"},re={class:"flex gap-5 items-start"},le={class:"w-full h-full flex justify-center items-center"},ne={class:"flex flex-col gap-1"},ce={class:"line-clamp-2"},ie={key:0,class:"text-xs text-typography-2 border w-min whitespace-nowrap px-2 py-1 rounded-lg border-typography-2"},de={class:"text-xs text-typography-2"},pe={class:"py-2 whitespace-nowrap pl-10"},ue=t("tr",null,[t("td",{class:"text-end py-2 px-5 text-sm text-typography-2"}," Subtotal Product "),t("td")],-1),_e=t("td",{class:"text-end py-2 px-5 text-sm text-typography-2"}," Subtotal Shipping ",-1),xe={class:"text-end"},ye=t("tr",null,[t("td",{class:"text-end py-2 px-5 text-sm text-typography-2"}," Service Fee "),t("td",{class:"text-end"},"Rp. 1.000")],-1),he=t("td",{class:"text-end py-2 px-5 text-sm text-typography-2"}," Total Orders ",-1),fe={class:"text-end"},R="ezzorasecretkey",De={__name:"PurchaseDetail",setup(me){const v=xt(),ut=yt(),A=ht(),D=T(!0),E=T(null),e=T({}),_t="https://api.ezzora.sites.id/";ft(async()=>{if(v.query.data){const n=h.enc.Base64.parse(v.query.data).toString(h.enc.Utf8),o=h.AES.encrypt(n,R).toString().replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");ut.replace({name:"purchase.detail",params:{id:o}})}else{const n=v.params.id,m=h.AES.decrypt(n.replace(/-/g,"+").replace(/_/g,"/"),R).toString(h.enc.Utf8);E.value=m,await A.paymentById(E.value,D),O()}}),mt(()=>v.query.data,async(n,m)=>{const o=h.AES.decrypt(v.params.id.replace(/-/g,"+").replace(/_/g,"/"),R).toString(h.enc.Utf8);E.value=o,await A.paymentById(E.value,D),O()});function f(n){if(n){if(!n||typeof n!="string")return"Invalid Date";const m=n.includes("T")?n:n.replace(" ","T")+"Z",o=new Date(m);if(isNaN(o.getTime()))return"Invalid Date";const S=o.getUTCFullYear(),B=String(o.getUTCMonth()+1).padStart(2,"0"),I=String(o.getUTCDate()).padStart(2,"0"),C=String(o.getUTCHours()).padStart(2,"0"),w=String(o.getUTCMinutes()).padStart(2,"0");return`${I}-${B}-${S} ${C}:${w}`}}const O=async()=>{e.value=A.singlePayment};function k(n){if(n)return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}return(n,m)=>{const o=L("v-timeline-item"),S=L("v-timeline"),B=L("v-progress-circular"),I=L("v-img");return y(),ct(gt,null,{default:c(()=>{var C,w,U,N,$,V,q,F,K,M,G,j,H,J,Y,Z,Q,W,X,tt,et,st,at,ot,rt;return[u(vt,{isLoading:D.value},null,8,["isLoading"]),D.value?pt("",!0):(y(),b("div",Dt,[t("div",Et,[t("div",St,[t("p",Ct," Invoice Code "+s((C=e.value)==null?void 0:C.invoice_code),1),wt,t("p",Lt,s((w=e.value)!=null&&w.status_proccess?(N=(U=e.value)==null?void 0:U.status_proccess)==null?void 0:N.replace("_"," "):(V=($=e.value)==null?void 0:$.status_payment)==null?void 0:V.replace("_"," ")),1)]),u(S,{direction:"horizontal",side:"start","truncate-line":"both","dot-color":"#ffffff","fill-dot":!0,"line-color":"#7b7b7b"},{default:c(()=>{var l,g,p,P,lt,nt;return[u(o,{size:"80","dot-color":"#43b430"},{opposite:c(()=>[zt,t("p",At,s(f(e.value.created_at)),1)]),icon:c(()=>[kt]),_:1}),u(o,{size:"80","dot-color":e.value.status_payment=="SUCCESS"?"#43b430":"#ffffff"},{opposite:c(()=>[Bt,t("p",It,s(e.value.paid_at?f(e.value.paid_at):"-"),1)]),icon:c(()=>[t("i",{class:z([e.value.status_payment=="SUCCESS"?"text-light-primary-1":"text-typography-2","fa-regular fa-money-check-dollar text-3xl"])},null,2)]),_:1},8,["dot-color"]),u(o,{size:"80","dot-color":(g=(l=e.value)==null?void 0:l.history)!=null&&g.some(a=>a.status=="BEING_PACKED")?"#43b430":"#ffffff"},{opposite:c(()=>{var a,r,i,_,x;return[Pt,t("p",Tt,s((r=(a=e.value)==null?void 0:a.history)!=null&&r.some(d=>d.status==="BEING_PACKED")?f((x=(_=(i=e.value)==null?void 0:i.history)==null?void 0:_.filter(d=>d.status==="BEING_PACKED")[0])==null?void 0:x.created_at):""),1)]}),icon:c(()=>{var a,r;return[t("i",{class:z([(r=(a=e.value)==null?void 0:a.history)!=null&&r.some(i=>i.status=="BEING_PACKED")?"text-light-primary-1":"text-typography-2","fa-regular fa-boxes-packing text-3xl"])},null,2)]}),_:1},8,["dot-color"]),u(o,{size:"80","dot-color":(P=(p=e.value)==null?void 0:p.history)!=null&&P.some(a=>a.status=="ALLOCATED")?"#43b430":"#ffffff"},{opposite:c(()=>{var a,r,i,_,x;return[Rt,t("p",Ot,s((r=(a=e.value)==null?void 0:a.history)!=null&&r.some(d=>d.status==="ALLOCATED")?f((x=(_=(i=e.value)==null?void 0:i.history)==null?void 0:_.filter(d=>d.status==="ALLOCATED")[0])==null?void 0:x.created_at):"-"),1)]}),icon:c(()=>{var a,r;return[t("i",{class:z([(r=(a=e.value)==null?void 0:a.history)!=null&&r.some(i=>i.status=="ALLOCATED")?"text-light-primary-1":"text-typography-2","fa-regular fa-truck text-3xl"])},null,2)]}),_:1},8,["dot-color"]),u(o,{size:"80","dot-color":(nt=(lt=e.value)==null?void 0:lt.history)!=null&&nt.some(a=>a.status=="DELIVERED")?"#43b430":"#ffffff"},{opposite:c(()=>{var a,r,i,_,x;return[Ut,t("p",Nt,s((r=(a=e.value)==null?void 0:a.history)!=null&&r.some(d=>d.status==="DELIVERED")?f((x=(_=(i=e.value)==null?void 0:i.history)==null?void 0:_.filter(d=>d.status==="DELIVERED")[0])==null?void 0:x.created_at):"-"),1)]}),icon:c(()=>{var a,r;return[t("i",{class:z([(r=(a=e.value)==null?void 0:a.history)!=null&&r.some(i=>i.status=="DELIVERED")?"text-light-primary-1":"text-typography-2","fa-regular fa-box-check text-3xl"])},null,2)]}),_:1},8,["dot-color"])]}),_:1})]),t("div",$t,[Vt,t("div",qt,[t("div",Ft,[Kt,t("div",Mt,[t("p",null,s((q=e.value)==null?void 0:q.courier_name)+" - "+s((F=e.value)==null?void 0:F.courier_service_name),1),t("p",null,s((K=e.value)==null?void 0:K.waybill),1)])]),t("div",Gt,[t("div",jt,[t("p",Ht,s((G=(M=e.value)==null?void 0:M.address)==null?void 0:G.name),1),t("p",Jt,s((H=(j=e.value)==null?void 0:j.address)==null?void 0:H.phone_number),1),t("p",Yt,s((Y=(J=e.value)==null?void 0:J.address)==null?void 0:Y.detail)+", "+s((Q=(Z=e.value)==null?void 0:Z.address)==null?void 0:Q.subdistrict)+", "+s((X=(W=e.value)==null?void 0:W.address)==null?void 0:X.city)+", "+s((et=(tt=e.value)==null?void 0:tt.address)==null?void 0:et.province)+", "+s((at=(st=e.value)==null?void 0:st.address)==null?void 0:at.post_code),1)]),t("div",null,[u(S,{align:"start",side:"end"},{default:c(()=>{var l,g;return[(y(!0),b(it,null,dt((g=(l=e.value)==null?void 0:l.history)==null?void 0:g.slice().reverse(),(p,P)=>(y(),ct(o,{"dot-color":"#ffffff",size:"small"},{default:c(()=>[t("div",Zt,[t("p",Qt,s(f(p.created_at)),1),t("div",null,[t("p",Wt,s(p.status=="ORDER_MADE"?"Order Created":p.status.replace("_"," ").toLowerCase()),1),t("div",Xt,s(p.message),1)])])]),_:2},1024))),256))]}),_:1})])])])]),t("div",te,[t("div",ee,[se,t("div",null,[t("table",null,[t("tbody",ae,[(y(!0),b(it,null,dt((rt=(ot=e.value)==null?void 0:ot.items)==null?void 0:rt.filter(l=>l.product_id!==null),(l,g)=>{var p;return y(),b("tr",null,[t("td",oe,[t("div",re,[u(I,{src:bt(_t)+"/storage/images/product/"+((p=l==null?void 0:l.product)==null?void 0:p.product_image),class:"h-28 w-28 rounded-lg",contain:""},{placeholder:c(()=>[t("div",le,[u(B,{color:"",indeterminate:""})])]),_:2},1032,["src"]),t("div",ne,[t("p",ce,s(l.product.product_name),1),l.bundling?(y(),b("p",ie,s(l.bundling.name),1)):pt("",!0),t("p",de," x"+s(l.quantity),1)])])]),t("td",pe," Rp. "+s(k(l.price)),1)])}),256)),ue,t("tr",null,[_e,t("td",xe," Rp. "+s(k(e.value.courier_price)),1)]),ye,t("tr",null,[he,t("td",fe," Rp. "+s(k(e.value.amount)),1)])])])])])])]))]}),_:1})}}};export{De as default};
