import{I as b}from"./vue-qrcode-reader-8adc1da8.js";import{r as c,d as x,m as y,h as s,f as k,w as C,i as B}from"./index-c1909b7c.js";const j={class:"bg-white max-w-3xl mx-auto rounded-lg overflow-hidden !h-[calc(80vh)]"},E={class:"px-3 py-2 flex justify-between items-center"},R=s("p",{class:"font-medium text-lg"},"Scan QR Code",-1),S=s("i",{class:"fa-solid fa-x"},null,-1),q=[S],M=s("div",{class:"bg-light-primary-2 rounded-full w-10 h-10 flex items-center justify-center"},[s("i",{class:"fa-solid fa-repeat"})],-1),O=[M],F={__name:"QrScanner",props:{qr:Object,show:Object,result:String},emits:["update:result"],setup(r,{emit:l}){const i=r,o=c("environment"),u=c(!1),d=c(!1),f=l,m=async()=>{switch(o.value){case"environment":o.value="user";break;case"user":o.value="environment";break}},h=async t=>{const e=o.value==="user",n=o.value==="environment",a=t.name==="OverconstrainedError";n&&a&&(u.value=!0),e&&a&&(d.value=!0),console.error(t)},v=async t=>{const e=t.map(n=>n.rawValue);console.log(t),f("update:result",e),i.qr.paused=!0,i.show.value=!1};function p(t,e){for(const n of t){const{boundingBox:{x:a,y:_,width:g,height:w}}=n;e.lineWidth=2,e.strokeStyle="#007bff",e.strokeRect(a,_,g,w)}}return(t,e)=>(x(),y("div",j,[s("div",E,[R,s("button",{onClick:e[0]||(e[0]=n=>r.show.value=!1),class:"rounded-full hover:bg-gray-100 w-8 h-8 flex items-center justify-center"},q)]),k(B(b),{constraints:{facingMode:o.value},onError:h,paused:r.qr.paused,onDetect:v,track:p},{default:C(()=>[s("button",{type:"button",onClick:m,class:"absolute top-3 left-3"},O)]),_:1},8,["constraints","paused"])]))}};export{F as _};
