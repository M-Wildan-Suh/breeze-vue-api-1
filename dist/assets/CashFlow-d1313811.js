import{_ as j}from"./ReportLayout-c28e7cd7.js";import{r,C as x,c as k,d as E,m as S,f as _,J as F,h as e,w as b,t as y,x as B,U as P,e as V,n as R}from"./index-c1909b7c.js";import{u as D}from"./expense-96f373f4.js";const A={class:"relative"},M={class:"bg-light-primary-1 dark:bg-dark-primary-2 p-5 rounded-lg space-y-3 shadow-lg"},N={class:"flex gap-3 items-center justify-center text-xs"},T=["onClick"],U=e("div",{class:"flex gap-2 items-center text-white bg-secondary-3 hover:bg-opacity-90 rounded-lg px-3 py-1 cursor-pointer"},[e("i",{class:"fa-solid fa-download"})],-1),I=[U],L={class:""},z={__name:"TableCashFlow",props:{expenses:Array,fetchExpense:Function},setup(v){const p=D(),g=v,d=r(""),o=r(1),h=r(10),w=[{key:"expense_name",title:"Expense Name"},{key:"expense_category.category_name",title:"Expense Category"},{key:"expense_date",title:"Date Issues"},{key:"expense_cost",title:"Total Cost"},{key:"id",title:"Action",align:"center"}],f=x(()=>Math.ceil(c.value.length/h.value)),c=x(()=>g.expenses.filter(a=>a.expense_name.toLowerCase().includes(d.value)));function u(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const t=r(!1),s=r([]),n=x(()=>s.value),l=async a=>{await p.downloadExpense(a,t)};return(a,m)=>{const $=k("v-data-table"),C=k("v-pagination");return E(),S("div",A,[_(F,{class:"w-full",errors:n.value},null,8,["errors"]),e("div",M,[_($,{page:o.value,"onUpdate:page":m[0]||(m[0]=i=>o.value=i),search:d.value,headers:w,items:v.expenses,"hide-default-footer":"","header-props":{class:"dark:bg-dark-primary-1 bg-light-primary-2 dark:!text-white border-b dark:!border-white/30"},"item-key":"id",class:"border dark:!border-typography-2/20 shadow-lg dark:!bg-dark-primary-1 !bg-light-primary-2 dark:!text-typography-1"},{"item.id":b(({item:i})=>[e("div",N,[e("button",{type:"button",onClick:oe=>l(i.id)},I,8,T)])]),"item.expense_cost":b(({item:i})=>[e("div",L,[e("p",null,"Rp. "+y(u(i.expense_cost)),1)])]),_:1},8,["page","search","items"]),_(C,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=i=>o.value=i),length:f.value,class:"bg-light-primary-2 border !border-typography-2/20 shadow-lg rounded-lg dark:bg-dark-primary-1 dark:text-white","total-visible":5},null,8,["modelValue","length"])])])}}},J={class:"w-full space-y-3"},Y={class:"grid grid-cols-3 gap-3"},q={class:"h-20 w-full shadow-lg rounded-lg flex items-center px-3 justify-between bg-light-primary-1 dark:bg-dark-primary-2 dark:text-typography-1 border dark:!border-typography-2"},G=e("div",{class:"dark:bg-light-primary-1 dark:text-typography-2 rounded-full p-3 w-14 h-14 flex-none flex items-center justify-center"},[e("i",{class:"fa-solid fa-hand-holding-dollar text-3xl"})],-1),H={class:"flex flex-col justify-center items-center w-full"},K={class:"text-xl font-medium text-secondary-3"},O=e("p",{class:"text-sm"},"Income",-1),Q={class:"h-20 w-full shadow-lg rounded-lg flex items-center px-3 justify-between bg-light-primary-1 dark:bg-dark-primary-2 dark:text-typography-1 border dark:!border-typography-2"},W=e("div",{class:"dark:bg-light-primary-1 dark:text-typography-2 rounded-full p-3 w-14 h-14 flex-none flex items-center justify-center"},[e("i",{class:"fa-solid fa-receipt text-3xl"})],-1),X={class:"flex flex-col justify-center items-center w-full"},Z={class:"text-xl font-medium text-red-500"},ee=e("p",{class:"text-sm"},"Expense",-1),te={class:"h-20 w-full shadow-lg rounded-lg flex items-center px-3 justify-between bg-light-primary-1 dark:bg-dark-primary-2 dark:text-typography-1 border dark:!border-typography-2"},se=e("div",{class:"dark:bg-light-primary-1 dark:text-typography-2 rounded-full p-3 w-14 h-14 flex-none flex items-center justify-center"},[e("i",{class:"fa-solid fa-money-bill-trend-up text-3xl"})],-1),ae={class:"flex flex-col justify-center items-center w-full"},re=e("p",{class:"text-sm"},"Profit/Loss",-1),de={__name:"CashFlow",setup(v){function p(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}const g=D(),d=r([]),o=r(""),h=r(w());function w(){const t=new Date,s=new Date(t);s.setDate(t.getDate()+1);const n=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),a=String(s.getDate()).padStart(2,"0");return`${n}-${l}-${a}`}const f=x(()=>!o.value||!h.value?d.value:d.value.filter(t=>{const s=new Date(t.expense_date),n=new Date(o.value),l=new Date(h.value);return s>=n&&s<=l})),c=x(()=>{let t=0;f.value.forEach(l=>{t+=l.expense_cost});const s=0,n=s-t;return{income:s,expense:t,proloss:n}});B(async()=>{await g.expenseAll(),await u()});async function u(){d.value=g.expenses}return P(()=>{u()}),(t,s)=>(E(),V(j,{title:"Cash Flow"},{default:b(()=>[e("div",J,[e("div",Y,[e("div",q,[G,e("div",H,[e("p",K," Rp. "+y(p(c.value.income)),1),O])]),e("div",Q,[W,e("div",X,[e("p",Z," Rp. "+y(p(c.value.expense)),1),ee])]),e("div",te,[se,e("div",ae,[e("p",{class:R(["text-xl font-medium",c.value.proloss>0?"text-secondary-3":"text-red-500"])}," Rp. "+y(p(c.value.proloss)),3),re])])]),_(z,{expenses:f.value,fetchExpense:u},null,8,["expenses"])])]),_:1}))}};export{de as default};
