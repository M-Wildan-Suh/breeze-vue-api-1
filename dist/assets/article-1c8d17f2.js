import{k as o,l}from"./index-c1909b7c.js";const r=()=>l.get("/sanctum/csrf-cookie"),h=o({id:"article",state:()=>({articles:[],loading:!1,error:null,create:{},edit:[],singleArticle:{},slugCreated:{}}),getters:{allArticle:e=>e.articles,isLoading:e=>e.loading,getError:e=>e.error},actions:{async articleAll(){this.loading=!0;try{const e=await l.get("/api/article").then(t=>{this.articles=t.data})}catch(e){this.error=e}finally{this.loading=!1}},async getDataCreate(){this.loading=!0;try{const e=await l.get("/api/article/create").then(t=>{this.create=t.data})}catch(e){this.error=e}finally{this.loading=!1}},async articleById(e){this.loading=!0;try{const t=await l.get(`/api/article/article-id/${e}`);t.status===200?this.singleArticle=t.data:this.singleArticle={}}catch(t){t.response&&t.response.status===404?this.singleArticle={}:this.error=t}finally{this.loading=!1}},async getDataEdit(e){this.loading=!0;try{const t=await l.get(`/api/article/${e}/edit`);this.edit=t.data}catch(t){t.response&&t.response.status===404?this.edit=[]:this.error=t}finally{this.loading=!1}},async addArticle(e,t,a){await r(),a.value=!0,l.post("/api/article",e).then(s=>{a.value=!1,this.articles.push(s.data),this.router.push({name:"admin.article.index"})}).catch(s=>{if(console.log(s),s.response.status!==422)throw s;t.value=Object.values(s.response.data.errors).flat(),a.value=!1})},async editArticle(e,t,a,s){await r(),a.value=!0,l.post(`/api/article/${s}`,e).then(i=>{a.value=!1,this.router.push({name:"admin.article.index"}),console.log(i)}).catch(i=>{if(console.log(i),i.response.status!==422)throw i;t.value=Object.values(i.response.data.errors).flat(),a.value=!1})},async deleteArticle(e,t){await r(),t.value=!0;try{const a=await l.delete(`/api/article/${e}`);this.articles=this.articles.filter(s=>s.id!==e),t.value=!1}catch(a){this.error=a,console.log(this.error),t.value=!1}finally{t.value=!1}},async publishArticle(e,t){await r(),t.value=!0;try{const a=await l.post(`/api/article-change-status/${e}`),s=a.data.id,i=this.articles.findIndex(c=>c.id===s);i!==-1&&(this.articles[i]={...this.articles[i],...a.data}),t.value=!1}catch(a){this.error=a,console.log(this.error),t.value=!1}finally{t.value=!1}}}});export{h as u};
