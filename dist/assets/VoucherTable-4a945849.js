import{r as d,C as v,c as m,d as o,m as r,f as i,J as M,h as t,w as c,i as w,R as V,E as R,G as q,n as C,t as u,q as _,s as z,y as G,F as b,p as f}from"./index-c1909b7c.js";import{_ as J}from"./ConfirmDelete-585e5a7b.js";import{u as H}from"./voucher-591ae05b.js";const I={class:"relative"},K={class:"bg-light-primary-1 dark:bg-dark-primary-2 p-5 rounded-lg space-y-3 shadow-lg"},O={class:"flex justify-between items-center"},Q=t("div",{class:"bg-secondary-3 text-white hover:bg-opacity-90 px-4 py-2 rounded-lg gap-1 flex items-center text-sm cursor-pointer shadow-lg"},[t("i",{class:"fa-solid fa-plus"}),t("p",null,"Add Voucher")],-1),W={class:"flex gap-3 items-center justify-center text-xs"},X=t("div",{class:"flex gap-2 items-center text-white bg-secondary-2 hover:bg-opacity-90 rounded-lg px-3 py-1 cursor-pointer"},[t("i",{class:"fa-solid fa-pen"}),t("p",null,"Edit")],-1),Y={key:0},Z={key:0},ee={class:"bg-light-primary-1 rounded-lg !max-h-[calc(100vh-20px)] overflow-y-scroll invisible-scrollbar"},te={class:"flex justify-between border-b py-3 px-6 sticky top-0 bg-light-primary-1"},oe={class:"font-medium"},re=t("span",{class:"text-sm text-gray-500"}," List Code Voucher ",-1),se=["onClick"],ae=t("i",{class:"fa-solid fa-x"},null,-1),le=[ae],ce={class:"p-6 grid grid-cols-3 gap-3"},ie={class:"col-span-3 grid grid-cols-3 gap-3"},ne=["onClick"],de=t("p",{class:"text-light-primary-1"}," Download All ",-1),ue=t("i",{class:"fa-solid fa-download text-light-primary-1"},null,-1),he=[de,ue],pe={class:"text-center"},_e=["onClick"],ge=t("i",{class:"fa-solid fa-download text-green-500"},null,-1),ye=[ge],ve={key:1,class:"flex justify-between"},me=["onClick"],be=t("i",{class:"fa-solid fa-download text-green-500"},null,-1),fe=[be],Ce={__name:"VoucherTable",props:{vouchers:Array,fetchVouchers:Function},setup(k){const g=H(),j=k,h=d(""),p=d(1),A=d(10),D=[{key:"voucher_name",title:"Voucher Name"},{key:"voucher_auto_generate",title:"Voucher Code"},{key:"voucher_validity",title:"Voucher Validity",align:"center"},{key:"voucher_stock",title:"Voucher Stock",align:"center"},{key:"id",title:"Action"}],$=v(()=>Math.ceil(N.value.length/A.value)),N=v(()=>j.vouchers.filter(l=>l.voucher_name.toLowerCase().includes(h.value))),y=d(!1),S=d([]),E=v(()=>S.value),L=async l=>{await g.deleteVoucher(l,y)},x=async l=>{await g.downloadVoucher(l,y)},B=async l=>{await g.downloadAllVoucher(l,y)};return(l,n)=>{const F=m("v-dialog"),P=m("v-data-table"),T=m("v-pagination");return o(),r("div",I,[i(M,{class:"w-full",errors:E.value},null,8,["errors"]),t("div",K,[t("div",O,[i(w(V),{to:{name:"admin.voucher.create"}},{default:c(()=>[Q]),_:1}),R(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e),class:"rounded-lg text-sm min-w-52 dark:!border-gray-500 border !border-typography-2/20 shadow-lg bg-light-primary-1 dark:bg-dark-primary-1 text-typography-3 dark:text-white",placeholder:"Search Voucher"},null,512),[[q,h.value]])]),i(P,{page:p.value,"onUpdate:page":n[1]||(n[1]=e=>p.value=e),search:h.value,headers:D,items:k.vouchers,"hide-default-footer":"","header-props":{class:"dark:bg-dark-primary-1 bg-light-primary-2 dark:!text-white border-b dark:!border-white/30"},"item-key":"id",class:"border dark:!border-typography-2/20 shadow-lg dark:!bg-dark-primary-1 !bg-light-primary-2 dark:!text-typography-1"},{"item.id":c(({item:e})=>[t("div",W,[i(w(V),{to:{name:"admin.voucher.edit",params:{id:e.id}}},{default:c(()=>[X]),_:2},1032,["to"]),i(J,{label:"Delete",type:"Voucher",id:e.id,method:L},null,8,["id"])])]),"item.voucher_validity":c(({item:e})=>[t("div",{class:C(["flex gap-3 items-center justify-center text-sm",new Date(e.voucher_validity)>new Date?"text-green-500":"text-red-500"])},u(e.voucher_validity),3)]),"item.voucher_stock":c(({item:e})=>[e&&e.code?(o(),r("p",Y,u(e.code.map(s=>s.voucher_stock).reduce((s,a)=>s+a,0)),1)):_("",!0)]),"item.voucher_auto_generate":c(({item:e})=>[e.voucher_auto_generate=="true"?(o(),r("div",Z,[i(F,{"max-width":"1080"},{activator:c(({props:s})=>[t("button",z({type:"button"},s,{class:"!text-blue-500 hover:underline"})," See Voucher Code ",16)]),default:c(({isActive:s})=>[t("div",ee,[t("div",te,[t("p",oe,[re,G(" "+u(e.voucher_name),1)]),t("button",{type:"button",onClick:a=>s.value=!1},le,8,se)]),t("div",ce,[t("div",ie,[e.voucher_image?(o(),r("button",{key:0,type:"button",onClick:a=>B(e.id),class:"col-start-3 border w-full bg-secondary-3 hover:bg-opacity-90 rounded-lg px-3 py-1 flex justify-center items-center gap-3 shadow-lg"},he,8,ne)):_("",!0)]),(o(!0),r(b,null,f(e.code,(a,U)=>(o(),r("div",{class:C(["border rounded-lg py-1 px-3 bg-light-primary-2 flex",e.voucher_image?"justify-between":"justify-center"])},[t("p",pe,u(a.voucher_code),1),e.voucher_image?(o(),r("button",{key:0,type:"button",onClick:ke=>x(a.id)},ye,8,_e)):_("",!0)],2))),256))])])]),_:2},1024)])):(o(),r("div",ve,[(o(!0),r(b,null,f(e.code,(s,a)=>(o(),r("p",{key:a},u(s.voucher_code),1))),128)),e.voucher_image?(o(!0),r(b,{key:0},f(e.code,(s,a)=>(o(),r("div",{key:a},[t("button",{type:"button",onClick:U=>x(s.id)},fe,8,me)]))),128)):_("",!0)]))]),_:1},8,["page","search","items"]),i(T,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=e=>p.value=e),length:$.value,class:"bg-light-primary-2 border !border-typography-2/20 shadow-lg rounded-lg dark:bg-dark-primary-1 dark:text-white","total-visible":5},null,8,["modelValue","length"])])])}}};export{Ce as _};
