import{J as n,K as h}from"./index-28c35e09.js";const o=()=>h.get("/sanctum/csrf-cookie"),u=n({id:"flash-sale",state:()=>({flashSales:[],loading:!1,error:null,singleFlashSale:{},flashSaleSoon:[]}),getters:{allFlashSales:s=>s.flashSales,isLoading:s=>s.loading,getError:s=>s.error},actions:{async flashSaleAll(){this.loading=!0;try{const s=await h.get("/api/flash-sale").then(e=>{this.flashSales=e.data})}catch(s){this.error=s}finally{this.loading=!1}},async getFlashSaleById(s){this.loading=!0;try{const e=await h.get(`/api/flash-sale/${s}`);e.status===200?this.singleFlashSale=e.data:this.singleFlashSale={}}catch(e){e.response&&e.response.status===404?this.singleFlashSale={}:this.error=e}finally{this.loading=!1}},async addFlashSale(s,e,t){await o(),t.value=!0,h.post("/api/flash-sale",s).then(a=>{t.value=!1,this.flashSales.push(a.data)}).catch(a=>{if(console.log(a),a.response.status!==422)throw a;e.value=Object.values(a.response.data.errors).flat(),t.value=!1})},async addProduct(s,e,t,a){await o(),a.value=!0,h.post(`/api/flash-sale/${s}/product`,e).then(l=>{a.value=!1,l.data.added_products.forEach(i=>{this.singleFlashSale.flash_sale_product.push(i)})}).catch(l=>{if(console.log(l),l.response.status!==422)throw l;t.value=Object.values(l.response.data.errors).flat(),a.value=!1})},async deleteFlashSale(s,e,t){await o(),t.value=!0,h.delete(`api/flash-sale/${s}`).then(a=>{this.flashSales=this.flashSales.filter(l=>l.id!==s),t.value=!1}).catch(a=>{if(console.log(a),a.response.status!==422)throw a;e.value=Object.values(a.response.data.errors).flat(),t.value=!1})},async deleteFlashSaleProduct(s,e,t){await o(),t.value=!0,h.delete(`api/flash-sale-product/${s}/`).then(a=>{t.value=!1,this.singleFlashSale.flash_sale_product=this.singleFlashSale.flash_sale_product.filter(l=>l.id!==s)}).catch(a=>{if(console.log(a),a.response.status!==422)throw a;e.value=Object.values(a.response.data.errors).flat(),t.value=!1})},async editFlashSaleProduct(s,e,t,a){await o(),a.value=!0,h.post(`api/flash-sale-product/${e}/`,s).then(l=>{a.value=!1,console.log(l)}).catch(l=>{if(console.log(l),l.response.status!==422)throw l;t.value=Object.values(l.response.data.errors).flat(),a.value=!1})},async getFlashSaleSoon(){this.loading=!0;try{const s=await h.get("/api/flash-sale-today/").then(e=>{this.flashSaleSoon=e.data})}catch(s){this.error=s}finally{this.loading=!1}}}});export{u};
