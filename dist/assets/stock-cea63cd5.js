import{k as h,l}from"./index-c1909b7c.js";const u=()=>l.get("/sanctum/csrf-cookie"),p=h({id:"stock",state:()=>({stocks:[],products:[],loading:!1,error:null,create:{},edit:[],singleStock:{},product:{},tempStocks:[],tempProduct:{}}),getters:{allStock:e=>e.stocks,isLoading:e=>e.loading,getError:e=>e.error},actions:{async stockAll(){this.loading=!0;try{const e=await l.get("/api/stock").then(t=>{this.stocks=t.data.stock,this.products=t.data.product})}catch(e){this.error=e}finally{this.loading=!1}},async getDataCreate(){this.loading=!0;try{const e=await l.get("/api/stock/create").then(t=>{this.create=t.data})}catch(e){this.error=e}finally{this.loading=!1}},async stockById(e){this.loading=!0;try{const t=await l.get(`/api/stock/${e}`);t.status===200?this.singleStock=t.data:this.singleStock={}}catch(t){t.response&&t.response.status===404?this.singleStock={}:this.error=t}finally{this.loading=!1}},async getDataEdit(e){this.loading=!0;try{const t=await l.get(`/api/stock/${e}/edit`);this.edit=t.data}catch(t){t.response&&t.response.status===404?this.edit=[]:this.error=t}finally{this.loading=!1}},async addStock(e,t,o){await u(),o.value=!0,l.post("/api/stock",e).then(s=>{o.value=!1,this.stocks.push(s.data),this.router.push({name:"admin.stock.index"})}).catch(s=>{if(console.log(s),s.response.status!==422)throw s;t.value=Object.values(s.response.data.errors).flat(),o.value=!1})},async generateStock(e,t,o,s){await u(),o.value=!0;try{const a=await l.post("/api/generate-stock",e);console.log(a),o.value=!1,a.data.status==200&&(s.value=Object.values(a.data.message).flat(),this.tempStocks=a.data.stock,this.tempProduct=a.data.product)}catch(a){if(o.value=!1,console.log(a),a.response&&a.response.status===422)t.value=Object.values(a.response.data.errors).flat();else throw a}},async editStock(e,t,o,s){await u(),o.value=!0,l.post(`/api/stock/${s}`,e).then(a=>{o.value=!1,this.router.push({name:"admin.stock.index"}),console.log(a)}).catch(a=>{if(console.log(a),a.response.status!==422)throw a;t.value=Object.values(a.response.data.errors).flat(),o.value=!1})},async deleteStock(e,t){await u(),t.value=!0;try{const o=await l.delete(`/api/stock/${e}`);this.stocks=this.stocks.filter(s=>s.id!==e),t.value=!1}catch(o){this.error=o,console.log(this.error),t.value=!1}finally{t.value=!1}},async checkQr(e,t,o,s,a,r){await u(),s.value=!0,a.value.paused=!0;try{const c=await l.post("/api/stock-check-qr",e),i=c.data.stock,n=t.find(d=>d.id===c.data.stock.id);i.product.product_code_type==="common_code"?n?(n.amount+=1,r.value=Object.values(["Success Added Product"]).flat()):(i.amount=1,t.push(i),r.value=Object.values(["Success Added Product"]).flat()):n?o.value=Object.values(["Product Already Scanned"]).flat():(i.amount=1,t.push(i),r.value=Object.values(["Success Added Product"]).flat()),s.value=!1,a.value.paused=!1}catch(c){if(console.log(c),c.response.status!==422)throw c;o.value=Object.values(c.response.data.errors).flat(),console.log(this.error),s.value=!1,a.value.paused=!1}finally{s.value=!1,a.value.paused=!1}},async submitToWarehouse(e,t,o,s){await u(),s.value=!0,l.post("/api/stock-to-warehouse",t).then(a=>{s.value=!1,console.log(a.data),this.router.push({name:"admin.stock.index"})}).catch(a=>{if(console.log(a),a.response.status!==422)throw a;o.value=Object.values(a.response.data.errors).flat(),s.value=!1})},async submitToPacked(e,t,o){await u(),o.value=!0,l.post("/api/stock-to-packed",e).then(s=>{o.value=!1,console.log(s),this.router.push({name:"packing.packed"})}).catch(s=>{if(console.log(s),s.response.status!==422)throw s;t.value=Object.values(s.response.data.errors).flat(),o.value=!1})}}});export{p as u};
